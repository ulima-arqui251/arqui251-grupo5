# 8.2. Patrones de Componente y Conector
[Volver al índice](/8/8.md)

## Decisión 1: 

**Título:**  
Patrón más adecuado para la relación entre node.js con express y React.js para la funciones internas de la aplicación

**Contexto:**  
Shopcart usa React para el frontend y Node.js para el backend; debemos buscar el mejor patrón que permita separadas la visualización de datos, el manejo de los datos y el acceso a la base de datos 

**Alternativas:**
1. **Modelo-Vista-Controlador:**
    - Separa las funcionalidades del frontend y backend
    - Disminuye el acoplamiento
    - Permite la integración con microservicios

2. **Broker:**
    - Permite que los usuarios puedan acceder a los servicios con un intermedario
    - El servidor provee los servicios
    - El broker ubica al servidor y brinda los datos al servidor para que ejecute los pedidos de los usuarios.

**Criterios de elección:**
- **Desacoplamiento:** se necesita que la aplicación tenga la ubicación de los módulos separadas entre sí.
- **Mantenibilidad** que se pueda diferenciar los módulos pertenecientes al frontend y backend
-**Usabilidad:** se necesita que los usuarios solo interactuen con los datos que se le presenten y que los que envíen luego sean procesados de forma externa a la visualización

**Decisión:**
Se escogió modelo-vista-controlador

**Sustento:**  
Se eligió MVC porque ofrece una clara separación entre la capa de presentación (React.js), el análisis de los datos en el backend (Node.js con Express) y conexión a la base de datos con el controlador, lo cual facilita el desacoplamiento, la mantenibilidad y la escalabilidad del sistema. 

**Implementación**

1. **Registro e inicio de sesión:** la vista para ingresar datos se hara en react, se procesará la solicitud dentro de Node.js y su resultado se dará al compararlos con los datos de la base de datos.
2. **Exploración y búsqueda inteligente, navegación por voz y escáner visual inteligente:** la vista mostrará las opciones de uso y de ingreso de datos, luego los datos se mandarán al backend para su procesamiento y mostrará los datos obtenidos de la base de datos (se mostrará nada si no se obtuvieron) 
3. **Gestión de productos y favoritos:** los productos mostrados en la vista y que sean marcados como favoritos serán guardados dentro de la base de datos como favoritos del usuario luego de que el backend los identifique.
4. **Gestión de emociones y recomendaciones:** se resolveran las entradas de datos de la vista, se procesarán en el backend y, según el resultado, este pedirá a la base de datos los productos necesarios para mostrar en la vista. 
4. **StoryCart – narrador de compra visual:** se mostrará el proceso de compra en la vista y se irá actualizando según los cambios sucedidos dentro de la vista. La detección y procesamiento de estos será realizada por el controlador.
5. **Carrito de compras y proceso de pago y carrito colaborativo y compras sociales:** se podrá cambiar los contenidos en la vista; el backend procesará los cambios y actualizará la información de la base de datos respecto a ellos. Cuando se quiera visualizar se pedirá a la base de datos los últimos pedidos y se podrán editar en la vista.
6. **Recompensas por actividad emocional:** el backend analizará la actividad emocional de los usuarios y mandará los datos procesados a la base de datos. La vista mostrará el ranking de los usuarios con mayores puntos emocionales; los datos se obtendrán de la base de datos por medio del backend.
7. **Gestión de planes y legalidad:** la vista mostrará los planes de suscripción de la empresa. El backend procesará las compras y brindará un nuevo rango al usuario; luego de hacer este proceso se actualizará la información sobre él en la base de datos.

---

## Decisión 2: 

**Título:**  
Escoger el mejor patrón para la implementación de servicios externos

**Contexto:**  
La aplicación requiere de servicios externos y en internet para el inicio de sesión de los usuarios. Se usará el middleware Passport.js para esto.

**Alternativas:**
1. **Arquitectura orientada a servicios:**
    - Perrmite implementar servicios externos
    - Permite usar un software para identificar los servicios de por medio
    - Permite conexión a red por REST

2. **Broker:**
    - Permite que los usuarios puedan acceder a los servicios con un intermedario
    - El intermediario se encargará de verificar si pertenecen
    - El análisis no se hace con servicios, sino con procesos internos.

**Criterios de elección:**
- **Disponibilidad:** que se encuentre disponible la mayoría de las veces
- **Mantenibilidad** que no se requiera mano de obra del negocio para solucionar la lógica
- **Escalabilidad** que permita incremento de usuarios sin afectar el rendimiento.

**Decisión:**
Se escogió Arquitectura orientada a servicios

**Sustento:**  
Se eligió SOA porque permite integrar  servicios externos por medio del protocolo REST; luego, estos pueden ser traducidos por un servicio de autenticación como Passport.js. Usar este enfoque permite que la disponibilidad sea alta, la mantenibilidad sea realizada por externos y que la escalabilidad sea alta.

**Implementación:**
Se mostrará la opción de inicio de sesión con el servicio Cloud en la vista de inicio de sesión de la aplicación. Esto nos permitirá obtener los datos de los servicios que este nos puede brindar. Para traducir si el ingreso fue exitoso al backend, se usará el middleware CORS.
