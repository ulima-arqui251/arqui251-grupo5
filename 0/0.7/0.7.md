# 0.7. Temas Individuales por Integrante (Informes)

# Manuel Malpartida - Automatización de pruebas (Playwright)

# Playwright: Automatización de Pruebas de Interfaz de Usuario

## 1. Desarrollo Conceptual

Playwright es una herramienta de código abierto para la automatización de pruebas de aplicaciones web. Desarrollada por Microsoft, permite interactuar con navegadores modernos como Chromium, Firefox y WebKit, ofreciendo soporte para múltiples lenguajes de programación como JavaScript, Python, C#, y Java. Esta versatilidad lo convierte en una opción popular para la creación de pruebas funcionales, de integración y de extremo a extremo (E2E).

### Características Clave
- **Soporte Multinavegador:** Compatible con Chromium, Firefox y WebKit.
- **Automatización Completa:** Permite interactuar con elementos dinámicos como menús, ventanas emergentes y diálogos.
- **Capturas de Pantalla y Grabación de Video:** Útil para depuración y documentación de pruebas.
- **Ejecuta en Diferentes Entornos:** Incluye opciones para ejecutarse en local, contenedores o en la nube.

## 2. Consideraciones Técnicas

Antes de usar Playwright, es importante considerar los siguientes aspectos técnicos:

### Requisitos del Sistema
- Node.js versión 14 o superior.
- Espacio en disco para los navegadores automatizados (~1 GB).
- Sistema operativo compatible: Windows, macOS, o Linux.

### Instalación
Puedes instalar Playwright usando npm:

```bash
npm install playwright
```

### Configuración Inicial
Para inicializar Playwright en tu proyecto:

```bash
npx playwright install
```
Esto descargará los navegadores necesarios.

### Organización de Pruebas
Es recomendable mantener las pruebas organizadas en carpetas separadas, siguiendo convenciones como:
- `/tests`: Directorio de pruebas.
- `/helpers`: Utilidades o funciones compartidas.
- `/config`: Configuración personalizada.

## 3. Demo: Primeros Pasos con Playwright

A continuación, se muestra un ejemplo básico de cómo usar Playwright para realizar una prueba de inicio de sesión en un sitio web ficticio.

#### Prueba Sencilla: Validar el título de la página principal
```javascript
const { chromium } = require('playwright');

(async () => {
    const browser = await chromium.launch();
    const page = await browser.newPage();

    await page.goto('https://example.com');
    const title = await page.title();

    console.log(`Título de la página: ${title}`);

    await browser.close();
})();
```

#### Prueba Mediana: Inicio de sesión básico
```javascript
const { chromium } = require('playwright');

(async () => {
    const browser = await chromium.launch();
    const page = await browser.newPage();

    await page.goto('https://example.com/login');
    await page.fill('#username', 'usuario_demo');
    await page.fill('#password', 'contraseña_segura');
    await page.click('button[type="submit"]');

    const loggedIn = await page.isVisible('#dashboard');
    console.log(`Inicio de sesión exitoso: ${loggedIn}`);

    await browser.close();
})();
```

#### Prueba Avanzada: Validar flujo de compra
```javascript
const { chromium } = require('playwright');

(async () => {
    const browser = await chromium.launch();
    const page = await browser.newPage();

    await page.goto('https://example.com');

    // Agregar producto al carrito
    await page.click('.product-item:first-child .add-to-cart');

    // Proceder al carrito
    await page.click('#cart-icon');

    // Finalizar compra
    await page.click('#checkout-button');
    await page.fill('#payment-info', '4111111111111111');
    await page.click('#confirm-purchase');

    const successMessage = await page.textContent('.success-message');
    console.log(`Compra completada: ${successMessage}`);

    await browser.close();
})();
```

### Ejecución de la Prueba
Guarda el código de la prueba en un archivo, por ejemplo, `test.js`, y ejecútalo con:

```bash
node test.js
```

### Resultado Esperado
- **Prueba Sencilla:** Se imprime el título de la página en la consola.
- **Prueba Mediana:** Se confirma que el usuario ha iniciado sesión exitosamente.
- **Prueba Avanzada:** Se verifica que la compra se haya completado mostrando un mensaje de éxito.

## 4. Conclusión

Playwright es una herramienta poderosa y flexible para la automatización de pruebas. Su capacidad para trabajar con múltiples navegadores y su enfoque en pruebas confiables lo hacen ideal para proyectos de desarrollo modernos. La simplicidad en su configuración inicial y la riqueza de sus funcionalidades permiten a los equipos de desarrollo asegurar la calidad del software de manera eficiente.

## 5. Referencias

- [Documentación Oficial de Playwright](https://playwright.dev/)
- [Repositorio en GitHub](https://github.com/microsoft/playwright)
- [Tutoriales y Ejemplos en Playwright.dev](https://playwright.dev/docs/intro)
