# 0.7. Temas Individuales por Integrante (Informes)

# Manuel Malpartida - Automatización de pruebas (Playwright)

# Playwright: Automatización de Pruebas de Interfaz de Usuario

## 1. Desarrollo Conceptual

Playwright es una herramienta de código abierto para la automatización de pruebas de aplicaciones web. Desarrollada por Microsoft, permite interactuar con navegadores modernos como Chromium, Firefox y WebKit, ofreciendo soporte para múltiples lenguajes de programación como JavaScript, Python, C#, y Java. Esta versatilidad lo convierte en una opción popular para la creación de pruebas funcionales, de integración y de extremo a extremo (E2E).

### Características Clave
- **Soporte Multinavegador:** Compatible con Chromium, Firefox y WebKit.
- **Automatización Completa:** Permite interactuar con elementos dinámicos como menús, ventanas emergentes y diálogos.
- **Capturas de Pantalla y Grabación de Video:** Útil para depuración y documentación de pruebas.
- **Ejecuta en Diferentes Entornos:** Incluye opciones para ejecutarse en local, contenedores o en la nube.

## 2. Consideraciones Técnicas

Antes de usar Playwright, es importante considerar los siguientes aspectos técnicos:

### Requisitos del Sistema
- Node.js versión 14 o superior.
- Espacio en disco para los navegadores automatizados (~1 GB).
- Sistema operativo compatible: Windows, macOS, o Linux.

### Instalación
Puedes instalar Playwright usando npm:

```bash
npm install playwright
```

### Configuración Inicial
Para inicializar Playwright en tu proyecto:

```bash
npx playwright install
```
Esto descargará los navegadores necesarios.

### Organización de Pruebas
Es recomendable mantener las pruebas organizadas en carpetas separadas, siguiendo convenciones como:
- `/tests`: Directorio de pruebas.
- `/helpers`: Utilidades o funciones compartidas.
- `/config`: Configuración personalizada.

## 3. Demo: Primeros Pasos con Playwright

A continuación, se muestra un ejemplo básico de cómo usar Playwright para realizar una prueba de inicio de sesión en un sitio web ficticio.

### Escenario de Prueba

#### Prueba Sencilla: Validar el título de la página principal

```javascript
const { chromium } = require('playwright');

(async () => {
    const browser = await chromium.launch();
    const page = await browser.newPage();

    await page.goto('https://example.com');
    const title = await page.title();

    console.log(`Título de la página: ${title}`);

    await browser.close();
})();
```

#### Prueba Mediana: Búsqueda en Google

```javascript
const { chromium } = require('playwright');

(async () => {
    const browser = await chromium.launch();
    const page = await browser.newPage();

    await page.goto('https://www.google.com');
    await page.fill('input[name="q"]', 'Playwright testing');
    await page.press('input[name="q"]', 'Enter');

    // Esperar a que aparezcan los resultados
    await page.waitForSelector('#search');

    const results = await page.$$eval('#search .g', nodes => nodes.map(n => n.textContent));
    console.log(`Resultados encontrados: ${results.length}`);

    await browser.close();
})();
```

#### Prueba Avanzada: Validar flujo de compra en un sitio de demostración

```javascript
const { chromium } = require('playwright');

(async () => {
    const browser = await chromium.launch();
    const page = await browser.newPage();

    await page.goto('https://demo.opencart.com');

    // Navegar a un producto
    await page.click('.product-thumb:first-child a');

    // Agregar producto al carrito
    await page.click('#button-cart');

    // Proceder al carrito
    await page.click('#cart > button');
    await page.click('strong:has-text("View Cart")');

    // Finalizar compra
    await page.click('.btn-primary:has-text("Checkout")');

    console.log('Flujo de compra validado exitosamente.');

    await browser.close();
})();
```

### Ejecución de la Prueba
Guarda el código de la prueba en un archivo, por ejemplo, `test.js`, y ejecútalo con:

```bash
node test.js
```

### Resultado Esperado
- **Prueba Sencilla:** Se imprime el título de la página en la consola.
- **Prueba Mediana:** Se muestran resultados de búsqueda en Google.
- **Prueba Avanzada:** Se confirma el flujo de compra en un sitio de demostración.

## 4. Conclusión

Playwright es una herramienta poderosa y flexible para la automatización de pruebas. Su capacidad para trabajar con múltiples navegadores y su enfoque en pruebas confiables lo hacen ideal para proyectos de desarrollo modernos. La simplicidad en su configuración inicial y la riqueza de sus funcionalidades permiten a los equipos de desarrollo asegurar la calidad del software de manera eficiente.

## 5. Referencias

- [Documentación Oficial de Playwright](https://playwright.dev/)
- [Repositorio en GitHub](https://github.com/microsoft/playwright)
- [Tutoriales y Ejemplos en Playwright.dev](https://playwright.dev/docs/intro)
